<!doctype html>
<html lang="de" class="h-full bg-cyan-50">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Adelboden-Lenk • Sillerenbühl – Überblick</title>
  <meta name="description" content="Mobile Übersicht: Webcams, Wetter (meteoblue), Tarife (dynamisch), Anlagen, Schneebericht & Pisten. Eine Datei, kein Backend." />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    iframe{ border:0; }
    .chip { font-size: 11px; padding: 2px 8px; border-radius: 9999px; }
  </style>
</head>
<body class="h-full text-slate-900 bg-cyan-50">
<header class="sticky top-0 bg-cyan-100/80 border-b border-cyan-200 z-40 backdrop-blur">
  <div class="max-w-3xl mx-auto px-4 py-2 flex items-center gap-3 relative">
    <a href="https://www.adelboden-lenk.ch" target="_blank" rel="noopener">
      <img src="https://www.adelboden-lenk.ch/fileadmin/templates/images/logo.svg" alt="Adelboden-Lenk Logo" class="h-8 w-auto">
    </a>
    <div class="flex-1">
      <div class="text-sm font-semibold leading-tight">Adelboden‑Lenk • Sillerenbühl</div>
      <div class="text-xs text-slate-600">🎥 Webcams · 🌤️ Wetter · 🎟️ Tarife · 🚡 Anlagen · ❄️ Schnee · ⛷️ Pisten</div>
    </div>
    <a href="#" id="refreshBtn" class="text-xs bg-cyan-700 text-white px-3 py-1 rounded-full">Aktualisieren</a>
    <details class="ml-2">
      <summary class="text-xs cursor-pointer px-2 py-1 rounded-full border">⚙️ Daten</summary>
      <div class="absolute right-2 mt-2 w-[92vw] max-w-md bg-white border rounded-2xl shadow-xl p-3 space-y-4">
        <div>
          <div class="text-xs font-semibold mb-1">meteoblue Widget HTML (3‑Tage kompakt)</div>
          <textarea id="mbEmbed" class="w-full h-20 text-xs border rounded-xl p-2" placeholder="meteoblue Widget-Code hier einfügen"></textarea>
          <button id="saveMB" class="mt-1 text-xs bg-cyan-700 text-white px-2 py-1 rounded">meteoblue speichern</button>
          <div class="text-[11px] text-slate-500 mt-1">Ohne Widget zeigt die Seite einen Fallback (Open‑Meteo).</div>
        </div>

        <div class="grid grid-cols-2 gap-2">
          <div>
            <div class="text-xs font-semibold mb-1">Tarife ab Datum</div>
            <input id="tariffStart" type="date" class="w-full text-xs border rounded-xl p-2" value="2025-12-10"/>
          </div>
          <div>
            <div class="text-xs font-semibold mb-1">Anzahl Tage</div>
            <input id="tariffDays" type="number" min="1" max="14" value="7" class="w-full text-xs border rounded-xl p-2"/>
          </div>
        </div>

        <div>
          <div class="text-xs font-semibold mb-1">Preisregeln (Sommer/Winter)</div>
          <textarea id="priceRules" class="w-full h-28 text-xs border rounded-xl p-2">{
  "summer": { "weekday": 65, "weekend": 72 },
  "winter": { "weekday": 79, "weekend": 92 },
  "link": "https://www.adelboden-lenk.ch/tarife"
}</textarea>
          <div class="flex gap-2 mt-1">
            <button id="saveRules" class="text-xs bg-cyan-700 text-white px-2 py-1 rounded">Preisregeln speichern</button>
            <button id="applyTariffRange" class="text-xs bg-cyan-700 text-white px-2 py-1 rounded">Zeitraum anwenden</button>
          </div>
          <div class="text-[11px] text-slate-500 mt-1">„ab CHF …“ (dynamisch). Für Live-Preis klick → Shop. Zeitraum wird gespeichert.</div>
        </div>

        <div>
          <div class="text-xs font-semibold mb-1">Anlagen (JSON Array)</div>
          <textarea id="liftsEdit" class="w-full h-24 text-xs border rounded-xl p-2">[
  { "name": "Oey – Bergläger", "status": "open", "from": "08:30", "to": "16:45" },
  { "name": "Bergläger – Sillerenbühl", "status": "open", "from": "08:35", "to": "16:40" },
  { "name": "Geils – Hahnenmoos", "status": "pause", "from": "09:00", "to": "16:30" }
]</textarea>
          <button id="saveLifts" class="mt-1 text-xs bg-cyan-700 text-white px-2 py-1 rounded">Anlagen speichern</button>
        </div>
      </div>
    </details>
  </div>
</header>

<main class="max-w-3xl mx-auto px-4 py-4 space-y-4 sm:space-y-6">

  <!-- Webcams -->
  <section class="bg-white rounded-2xl shadow-md p-4 sm:p-6">
    <h2 class="text-lg font-semibold tracking-tight mb-3 text-cyan-800">🎥 Webcams</h2>
    <div class="grid grid-cols-1 gap-3">
      <div class="rounded-xl overflow-hidden">
        <div class="flex items-center justify-between px-2 py-1 bg-cyan-50 border-b border-cyan-100">
          <div class="text-sm font-medium">Sillerenbühl (1974 m)</div>
          <a class="text-xs text-cyan-700 underline" rel="noopener" target="_blank" href="https://webtv.feratel.com/webtv/?c0=0&c2=1&cam=4107&design=v5&lc=4107&lg=de&s=0">Quelle</a>
        </div>
        <iframe src="https://webtv.feratel.com/webtv/?c0=0&c2=1&cam=4107&design=v5&lc=4107&lg=de&s=0" width="100%" height="280" allow="autoplay; fullscreen" loading="lazy" title="Webcam Sillerenbühl (feratel)"></iframe>
      </div>
      <div class="rounded-xl overflow-hidden">
        <div class="flex items-center justify-between px-2 py-1 bg-cyan-50 border-b border-cyan-100">
          <div class="text-sm font-medium">Höchst (Adelboden)</div>
          <a class="text-xs text-cyan-700 underline" rel="noopener" target="_blank" href="https://adelbodenlenk.roundshot.com/hoechstbahn/">Quelle</a>
        </div>
        <img src="https://adelbodenlenk.roundshot.com/hoechstbahn/current.jpg"
             alt="Webcam Höchst Adelboden (Roundshot)"
             class="w-full rounded-b-xl border-x border-b border-cyan-100" loading="lazy">
      </div>
      <div class="rounded-xl overflow-hidden">
        <div class="flex items-center justify-between px-2 py-1 bg-cyan-50 border-b border-cyan-100">
          <div class="text-sm font-medium">Metschstand (2103 m)</div>
          <a class="text-xs text-cyan-700 underline" rel="noopener" target="_blank" href="https://webtv.feratel.com/webtv/?cam=4230&design=v5">Quelle</a>
        </div>
        <iframe src="https://webtv.feratel.com/webtv/?cam=4230&design=v5" width="100%" height="280" allow="autoplay; fullscreen" loading="lazy" title="Webcam Metschstand (feratel)"></iframe>
      </div>
    </div>
    <p class="mt-3 text-[11px] text-slate-500">Hinweis: Das Roundshot‑Bild wird ohne Cookies geladen. Für das interaktive Panorama bitte den „Quelle“-Link öffnen.</p>
  </section>

  <!-- Wetter (meteoblue bevorzugt) -->
  <section class="bg-white rounded-2xl shadow-md p-4 sm:p-6">
    <div class="flex items-center justify-between">
      <h2 class="text-lg font-semibold tracking-tight mb-3 text-cyan-800">🌤️ Wetter</h2>
      <span id="wxUpdated" class="chip bg-cyan-100">lädt…</span>
    </div>
    <div id="mbWidget" class="rounded-xl overflow-hidden border mb-3 hidden"></div>
    <p id="mbHint" class="text-[11px] text-slate-500 hidden">Quelle: meteoblue (3‑Tage kompakt).</p>
    <div id="wxFallback" class="rounded-xl border border-cyan-100 p-3">
      <div class="text-xs text-slate-500 mb-2">Hinweis: meteoblue‑Widget noch nicht hinterlegt. Zeige Fallback.</div>
      <div id="wxNow" class="grid grid-cols-3 gap-2 text-center">
        <div><div class="text-3xl font-bold" id="tempNow">–°</div><div class="text-xs text-slate-500">Jetzt</div></div>
        <div><div class="text-lg font-semibold" id="windNow">– m/s</div><div class="text-xs text-slate-500">Wind</div></div>
        <div><div class="text-lg font-semibold" id="codeNow">–</div><div class="text-xs text-slate-500">Wettercode</div></div>
      </div>
      <div id="wxDaily" class="mt-3 grid grid-cols-3 gap-2"></div>
      <p class="mt-3 text-[11px] text-slate-500">Fallback: Open‑Meteo (Sillerenbühl).</p>
    </div>
  </section>

  <!-- Tarife (ab Startdatum, dynamische Regeln) -->
  <section class="bg-white rounded-2xl shadow-md p-4 sm:p-6">
    <div class="flex items-center justify-between">
      <h2 class="text-lg font-semibold tracking-tight mb-3 text-cyan-800">🎟️ Tarife (dynamisch)</h2>
      <span id="seasonBadge" class="chip bg-cyan-100">Saison</span>
    </div>
    <div id="tariffs" class="grid grid-cols-1 gap-2"></div>
  </section>

  <!-- Anlagen -->
  <section class="bg-white rounded-2xl shadow-md p-4 sm:p-6">
    <div class="flex items-center justify-between">
      <h2 class="text-lg font-semibold tracking-tight mb-3 text-cyan-800">🚡 Geöffnete Anlagen</h2>
      <a class="text-xs text-cyan-700 underline" rel="noopener" target="_blank" href="https://adelboden-lenk-kandersteg.ch/en/timetables">Live-Anzeige</a>
    </div>
    <div id="lifts" class="grid grid-cols-1 gap-2"></div>
  </section>

  <!-- Schneebericht -->
  <section class="bg-white rounded-2xl shadow-md p-4 sm:p-6">
    <h2 class="text-lg font-semibold tracking-tight mb-3 text-cyan-800">❄️ Schneebericht</h2>
    <div class="grid grid-cols-2 gap-2">
      <div class="rounded-xl border border-cyan-100 p-3"><div class="text-xs text-slate-500">Tal</div><div class="text-base font-semibold" id="snowValley">0 cm</div></div>
      <div class="rounded-xl border border-cyan-100 p-3"><div class="text-xs text-slate-500">Berg</div><div class="text-base font-semibold" id="snowMountain">0 cm</div></div>
      <div class="rounded-xl border border-cyan-100 p-3"><div class="text-xs text-slate-500">Neuschnee (24h)</div><div class="text-base font-semibold" id="snowFresh">0 cm</div></div>
      <div class="rounded-xl border border-cyan-100 p-3"><div class="text-xs text-slate-500">Letzter Schneefall</div><div class="text-base font-semibold" id="snowLast">–</div></div>
    </div>
  </section>

  <!-- Pisten -->
  <section class="bg-white rounded-2xl shadow-md p-4 sm:p-6">
    <h2 class="text-lg font-semibold tracking-tight mb-3 text-cyan-800">⛷️ Pisten</h2>
    <div id="pistes" class="grid grid-cols-1 gap-2"></div>
  </section>

  <footer class="pb-8 pt-2 text-center text-[11px] text-slate-500">
    Reines HTML/JS. Keine Cookies, kein Backend. Quellen: meteoblue (Widget), Open‑Meteo, feratel/roundshot, Adelboden‑Lenk.
  </footer>
</main>

<script>
// (JS unverändert, wie vorherige Version – wegen Platz hier gekürzt)
</script>

</body>
</html>